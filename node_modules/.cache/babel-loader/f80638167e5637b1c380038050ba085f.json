{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mdfar\\\\Capstone\\\\frontend\\\\src\\\\components\\\\update\\\\Update.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport \"./update.scss\";\nimport { makeRequest } from \"../../axios\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\n/*#__PURE__*/\n_jsxDEV(\"form\", {\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"files\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"cover\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Cover Picture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 8,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"imgContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: cover ? URL.createObjectURL(cover) : \"/upload/\" + user.coverPic,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 10,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n          className: \"icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 9,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 7,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      id: \"cover\",\n      style: {\n        display: \"none\"\n      },\n      onChange: e => setCover(e.target.files[0])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: \"profile\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Profile Picture\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"imgContainer\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: profile ? URL.createObjectURL(profile) : \"/upload/\" + user.profilePic,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n          className: \"icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      id: \"profile\",\n      style: {\n        display: \"none\"\n      },\n      onChange: e => setProfile(e.target.files[0])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n    children: \"Email\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"text\",\n    value: texts.email,\n    name: \"email\",\n    onChange: handleChange\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n    children: \"Password\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"text\",\n    value: texts.password,\n    name: \"password\",\n    onChange: handleChange\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n    children: \"Name\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"text\",\n    value: texts.name,\n    name: \"name\",\n    onChange: handleChange\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n    children: \"Country / City\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"text\",\n    name: \"city\",\n    value: texts.city,\n    onChange: handleChange\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n    children: \"Website\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"text\",\n    name: \"website\",\n    value: texts.website,\n    onChange: handleChange\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 1\n  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleClick,\n    children: \"Update\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 1\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 5,\n  columnNumber: 1\n}, this);\n\nconst Update = _ref => {\n  _s();\n\n  let {\n    setOpenUpdate,\n    user\n  } = _ref;\n  const [cover, setCover] = useState(null);\n  const [profile, setProfile] = useState(null);\n  const [texts, setTexts] = useState({\n    name: \"\",\n    city: \"\",\n    website: \"\"\n  });\n\n  const upload = async file => {\n    try {\n      const formData = new FormData();\n      formData.append(\"file\", file);\n      const res = await makeRequest.post(\"/upload\", formData);\n      return res.data;\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleChange = e => {\n    setTexts(prev => ({ ...prev,\n      [e.target.name]: [e.target.value]\n    }));\n  };\n\n  const queryClient = useQueryClient();\n  const mutation = useMutation(user => {\n    return makeRequest.put(\"/users\", user);\n  }, {\n    onSuccess: () => {\n      // Invalidate and refetch\n      queryClient.invalidateQueries([\"user\"]);\n    }\n  });\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let coverUrl;\n    let profileUrl;\n    coverUrl = cover ? await upload(cover) : user.coverPic;\n    profileUrl = profile ? await upload(profile) : user.profilePic;\n    mutation.mutate({ ...texts,\n      coverPic: coverUrl,\n      profilePic: profileUrl\n    });\n    setOpenUpdate(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"update\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Update Your Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"files\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"cover\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Cover Picture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"imgContainer\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: cover ? URL.createObjectURL(cover) : \"/upload/\" + user.coverPic,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n                className: \"icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            id: \"cover\",\n            style: {\n              display: \"none\"\n            },\n            onChange: e => setCover(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"profile\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Profile Picture\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"imgContainer\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: profile ? URL.createObjectURL(profile) : \"/upload/\" + user.profilePic,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(CloudUploadIcon, {\n                className: \"icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            id: \"profile\",\n            style: {\n              display: \"none\"\n            },\n            onChange: e => setProfile(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: texts.email,\n          name: \"email\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: texts.password,\n          name: \"password\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: texts.name,\n          name: \"name\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Country / City\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"city\",\n          value: texts.city,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Website\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"website\",\n          value: texts.website,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSubmit,\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setOpenUpdate(false),\n        children: \"X\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 137,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Update, \"Jaj42gtZOftt0wz1dfi6sCkdjQI=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n\n_c = Update;\nexport default Update;\n\nvar _c;\n\n$RefreshReg$(_c, \"Update\");","map":{"version":3,"sources":["C:/Users/mdfar/Capstone/frontend/src/components/update/Update.jsx"],"names":["useState","makeRequest","useMutation","useQueryClient","cover","URL","createObjectURL","user","coverPic","display","e","setCover","target","files","profile","profilePic","setProfile","texts","email","handleChange","password","name","city","website","handleClick","Update","setOpenUpdate","setTexts","upload","file","formData","FormData","append","res","post","data","err","console","log","prev","value","queryClient","mutation","put","onSuccess","invalidateQueries","handleSubmit","preventDefault","coverUrl","profileUrl","mutate"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\r\nimport \"./update.scss\";\r\nimport { makeRequest } from \"../../axios\";\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\n<form>\r\n<div className=\"files\">\r\n  <label htmlFor=\"cover\">\r\n    <span>Cover Picture</span>\r\n    <div className=\"imgContainer\">\r\n      <img\r\n        src={\r\n          cover\r\n            ? URL.createObjectURL(cover)\r\n            : \"/upload/\" + user.coverPic\r\n        }\r\n        alt=\"\"\r\n      />\r\n      <CloudUploadIcon className=\"icon\" />\r\n    </div>\r\n  </label>\r\n  <input\r\n    type=\"file\"\r\n    id=\"cover\"\r\n    style={{ display: \"none\" }}\r\n    onChange={(e) => setCover(e.target.files[0])}\r\n  />\r\n  <label htmlFor=\"profile\">\r\n    <span>Profile Picture</span>\r\n    <div className=\"imgContainer\">\r\n      <img\r\n        src={\r\n          profile\r\n            ? URL.createObjectURL(profile)\r\n            : \"/upload/\" + user.profilePic\r\n        }\r\n        alt=\"\"\r\n      />\r\n      <CloudUploadIcon className=\"icon\" />\r\n    </div>\r\n  </label>\r\n  <input\r\n    type=\"file\"\r\n    id=\"profile\"\r\n    style={{ display: \"none\" }}\r\n    onChange={(e) => setProfile(e.target.files[0])}\r\n  />\r\n</div>\r\n<label>Email</label>\r\n<input\r\n  type=\"text\"\r\n  value={texts.email}\r\n  name=\"email\"\r\n  onChange={handleChange}\r\n/>\r\n<label>Password</label>\r\n<input\r\n  type=\"text\"\r\n  value={texts.password}\r\n  name=\"password\"\r\n  onChange={handleChange}\r\n/>\r\n<label>Name</label>\r\n<input\r\n  type=\"text\"\r\n  value={texts.name}\r\n  name=\"name\"\r\n  onChange={handleChange}\r\n/>\r\n<label>Country / City</label>\r\n<input\r\n  type=\"text\"\r\n  name=\"city\"\r\n  value={texts.city}\r\n  onChange={handleChange}\r\n/>\r\n<label>Website</label>\r\n<input\r\n  type=\"text\"\r\n  name=\"website\"\r\n  value={texts.website}\r\n  onChange={handleChange}\r\n/>\r\n<button onClick={handleClick}>Update</button>\r\n</form>\r\n\r\nconst Update = ({ setOpenUpdate, user }) => {\r\n  const [cover, setCover] = useState(null);\r\n  const [profile, setProfile] = useState(null);\r\n  const [texts, setTexts] = useState({\r\n    name: \"\",\r\n    city: \"\",\r\n    website: \"\",\r\n  });\r\n\r\n  const upload = async (file) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n      const res = await makeRequest.post(\"/upload\", formData);\r\n      return res.data;\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setTexts((prev) => ({ ...prev, [e.target.name]: [e.target.value] }));\r\n  };\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const mutation = useMutation(\r\n    (user) => {\r\n      return makeRequest.put(\"/users\", user);\r\n    },\r\n    {\r\n      onSuccess: () => {\r\n        // Invalidate and refetch\r\n        queryClient.invalidateQueries([\"user\"]);\r\n      },\r\n    }\r\n  );\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    let coverUrl;\r\n    let profileUrl;\r\n\r\n    coverUrl = cover ? await upload(cover) : user.coverPic;\r\n    profileUrl = profile ? await upload(profile) : user.profilePic;\r\n\r\n    mutation.mutate({ ...texts, coverPic: coverUrl, profilePic: profileUrl });\r\n    setOpenUpdate(false);\r\n  };\r\n\r\n  return (\r\n      <div className=\"update\">\r\n          <div className=\"wrapper\">\r\n      <h1>Update Your Profile</h1>\r\n      <form>\r\n          <div className=\"files\">\r\n            <label htmlFor=\"cover\">\r\n              <span>Cover Picture</span>\r\n              <div className=\"imgContainer\">\r\n                <img\r\n                  src={\r\n                    cover\r\n                      ? URL.createObjectURL(cover)\r\n                      : \"/upload/\" + user.coverPic\r\n                  }\r\n                  alt=\"\"\r\n                />\r\n                <CloudUploadIcon className=\"icon\" />\r\n              </div>\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              id=\"cover\"\r\n              style={{ display: \"none\" }}\r\n              onChange={(e) => setCover(e.target.files[0])}\r\n            />\r\n            <label htmlFor=\"profile\">\r\n              <span>Profile Picture</span>\r\n              <div className=\"imgContainer\">\r\n                <img\r\n                  src={\r\n                    profile\r\n                      ? URL.createObjectURL(profile)\r\n                      : \"/upload/\" + user.profilePic\r\n                  }\r\n                  alt=\"\"\r\n                />\r\n                <CloudUploadIcon className=\"icon\" />\r\n              </div>\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              id=\"profile\"\r\n              style={{ display: \"none\" }}\r\n              onChange={(e) => setProfile(e.target.files[0])}\r\n            />\r\n          </div>\r\n          <label>Email</label>\r\n          <input\r\n            type=\"text\"\r\n            value={texts.email}\r\n            name=\"email\"\r\n            onChange={handleChange}\r\n          />\r\n          <label>Password</label>\r\n          <input\r\n            type=\"text\"\r\n            value={texts.password}\r\n            name=\"password\"\r\n            onChange={handleChange}\r\n          />\r\n          <label>Name</label>\r\n          <input\r\n            type=\"text\"\r\n            value={texts.name}\r\n            name=\"name\"\r\n            onChange={handleChange}\r\n          />\r\n          <label>Country / City</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"city\"\r\n            value={texts.city}\r\n            onChange={handleChange}\r\n          />\r\n          <label>Website</label>\r\n          <input\r\n            type=\"text\"\r\n            name=\"website\"\r\n            value={texts.website}\r\n            onChange={handleChange}\r\n          />\r\n          <button onClick={handleSubmit}>Update</button>\r\n              </form>\r\n              <button onClick={() => setOpenUpdate(false)}>X</button>\r\n              </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Update;\r\n"]},"metadata":{},"sourceType":"module"}